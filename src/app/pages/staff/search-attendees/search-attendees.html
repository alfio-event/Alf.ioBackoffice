<ActionBar class="nt-action-bar" title="Search">
    <NavigationButton *ifAndroid icon="res://ic_arrow_back_white" (tap)="onBackTap()" text="Scan"></NavigationButton>
    <NavigationButton *ifIos (tap)="onBackTap()" text="Scan"></NavigationButton>
</ActionBar>

<GridLayout rows="50, *">
    <SearchBar
        class="h3"
        hint="Search by First name, Last name, Category name, email"
        [text]="searchPhrase"
        (textChange)="onTextChanged($event)"
        (clear)="onClear($event)"
        (submit)="onSubmit($event)"
        #searchBar
        row="0"
    ></SearchBar>
    <StackLayout row="1" orientation="vertical" verticalAlignment="center" *ngIf="!isLoading && results.length === 0">
        <ng-container *ngIf="!searchComplete">
            <Image [src]="account.url + event.imageUrl" class="m-10 m-b-0" loadMode="async" stretch="aspectFit" height="100"></Image>
            <Label text="Search Attendees" class="text-center label font-weight-bold h2"></Label>
            <Label textWrap="true" text="Search attendees by first name, last name, email, ticket ID, reservation contact" class="body text-center"></Label>
        </ng-container>
        <ng-container *ngIf="searchComplete">
            <Label class="icon icon-3x text-center text-warning" text="&#xf1f0;"></Label>
            <Label text="Nothing found" class="text-center label font-weight-bold h2"></Label>
            <Label textWrap="true" text="Unable to find attendees for the given search criteria" class="body text-center"></Label>
        </ng-container>
    </StackLayout>
    <RadListView id="list" *ngIf="!isLoading && results.length > 0" [items]="results" row="1" multipleSelection="false" selectionBehavior="None" swipeActions="false" pullToRefresh="false">
        <ng-template tkListItemTemplate let-attendee="item">
            <GridLayout rows="30, 30" columns="40, *, 100, 40" class="-separator" (tap)="select(attendee)">
                <Label [text]="attendeeStatusIcon(attendee)" rowSpan="2" 
                       [class.text-success]="attendee.ticketStatus === 'CHECKED_IN'"
                       [class.text-warning]="attendee.ticketStatus === 'TO_BE_PAID'"
                       col="0" class="icon icon-1-5x person-icon text-center" *ngIf="attendee"></Label>
                <Label [text]="attendee.firstName + ' ' + attendee.lastName" class="h3" textWrap="true" col="1" row="0" *ngIf="attendee"></Label>
                <Label [text]="uppercaseUuid(attendee)" class="text-muted text-right" row="0" col="2" *ngIf="attendee"></Label>
                <Label [text]="attendee.categoryName" row="1" col="1" *ngIf="attendee"></Label>
                <Label [text]="attendee.amountToPay" class="text-warning text-right" row="1" col="2" *ngIf="attendee && attendee.ticketStatus === 'TO_BE_PAID'"></Label>
                <Label text="&#xf2fb;" col="3" rowSpan="2" class="icon icon-1-5x person-icon text-center"></Label>
            </GridLayout>
        </ng-template>
      </RadListView>
    <ActivityIndicator class="activity-indicator" [busy]="isLoading" [visibility]="isLoading ? 'visible' : 'collapse'" row="1" horizontalAlignment="center" verticalAlignment="center"></ActivityIndicator>
  
</GridLayout>